Usage Examples

  The following are examples of how to use this plugin.

* Start and Stop Agent

  For a given configuration file located in <<<src/test/resources/>>>:

+---+
# flume.properties: A single-node Flume configuration
a1.sources = r1
a1.sinks = k1
a1.channels = c1

# Describe/configure the source
a1.sources.r1.type = netcat
a1.sources.r1.bind = localhost
a1.sources.r1.port = 44444

# Describe the sink
a1.sinks.k1.type = logger

# Use a channel which buffers events in memory
a1.channels.c1.type = memory
a1.channels.c1.capacity = 1000

# Bind the source and sink to the channel
a1.sources.r1.channels = c1
a1.sinks.k1.channel = c1
+---+

  ...the plugin configuration to start this agent prior to the integration tests and stop it afterward would look like the following:

+---+
<plugin>
    <groupId>${project.groupId}</groupId>
    <artifactId>basset-flume-agent-maven-plugin</artifactId>
    <configuration>
        <agentName>a1</agentName>
        <configFile>${project.build.testOutputDirectory}/flume.properties</configFile>
    </configuration>
    <executions>
        <execution>
            <id>start-flume-agent</id>
            <goals>
                <goal>start-agent</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-flume-agent</id>
            <goals>
                <goal>stop-agent</goal>
            </goals>
        </execution>
    </executions>
</plugin>
+---+

  Using this configuration, you can also use the <<<run-agent>>> goal to start this agent separate from the Maven build.

* Specifying Flume Plugins

  Given the following configuration in your POM:

+---+
<project>
    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>com.cerner.flume</groupId>
                <artifactId>my-flume-plugin</artifactId>
                <version>1.0</version>
                <classifier>flume-plugin</classifier>
                <type>tar.gz</type>
            </dependency>
        </dependencies>
    </dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>com.cerner.flume</groupId>
            <artifactId>my-flume-plugin</artifactId>
            <version>1.0</version>
            <classifier>flume-plugin</classifier>
            <type>tar.gz</type>
        </dependency>
    </dependencies>
</project>
+---+

  ...you can have it installed in the Flume agent as a Flume plugin through this configuration in the plugin:

+---+
<plugin>
    <groupId>${project.groupId}</groupId>
    <artifactId>basset-flume-agent-maven-plugin</artifactId>
    <configuration>
        <flumePlugins>
            <flumePlugin>
                <groupId>${project.groupId}</groupId>
                <artifactId>basset-flume-io</artifactId>
            </flumePlugin>
        </flumePlugins>
    </configuration>
</plugin>
+---+